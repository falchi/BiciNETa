<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script> 

<style type="text/css">
  html { height: 100% }
  body { height: 100%; }  
  .container-fluid { height: 100%;}
  .row-fluid { height: 90%;}
  #gMap { height: 100%; width: 50%;}
</style>

<div class="row-fluid">

  <div id="gMap" class="span10 well"> 
    <div id="map_canvas" style="width:100%; height:100%"></div>  
  </div>

  <div class="span3">
    <br><br><br><br><br><br><br>
    <h1><%= @point.place %><h1>
      <br><br>
    <p>
      <b>Direcci√≥n:</b>
      <%= @point.address %>
    </p>

    <p>
      <b>Latitude:</b>
      <%= @point.latitude %>
    </p>

    <p>
      <b>Longitude:</b>
      <%= @point.longitude %>
    </p>
    <p>
      <b>Creador:</b>
      <% if @user.nil? %>
          <%= link_to "usuario eliminado", "#" %>
        <% else %>
          <%= link_to @user.name, @user %>
        <% end %>        
    </p>

  </div>  
</div>

<% if current_user && ( @point.user && ( @point.user.id == current_user.id)  || current_user.is_admin?) %> 
  <%= link_to 'Edit', edit_point_path(@point), class: "btn" %>
<% end %>
<%= link_to 'Back', points_path, class: "btn" %>

<script type="text/javascript">
  function initialize() {

    var latlng = new google.maps.LatLng(<%= @point.latitude %>, <%= @point.longitude%>);    
    var myOptions = {
      zoom:16,
      center:latlng,
      mapTypeId:google.maps.MapTypeId.ROADMAP,      
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);    
    
    var marker = new google.maps.Marker({
      position:latlng,
      title: "<%= @point.place %>",
      map: map,
    });
  }
  google.maps.event.addDomListener(window, 'load', initialize);
</script>
  